<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>wondr by BNI</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel untuk compile JSX di browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Noto Sans (Opsional, agar lebih mirip) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #e5e7eb;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .animate-spin-slow {
            animation: spin 3s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (SVG Manual agar tidak perlu dependency luar yang ribet) ---
        const Icon = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const Bell = (props) => <Icon {...props}><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></Icon>;
        const ReceiptText = (props) => <Icon {...props}><path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"/><path d="M14 8H8"/><path d="M16 12H8"/><path d="M13 16H8"/></Icon>;
        const Eye = (props) => <Icon {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></Icon>;
        const EyeOff = (props) => <Icon {...props}><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/></Icon>;
        const Send = (props) => <Icon {...props}><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></Icon>;
        const CreditCard = (props) => <Icon {...props}><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></Icon>;
        const FileText = (props) => <Icon {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></Icon>;
        const Wallet = (props) => <Icon {...props}><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></Icon>;
        const Smartphone = (props) => <Icon {...props}><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></Icon>;
        const Globe = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></Icon>;
        const ShoppingBag = (props) => <Icon {...props}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></Icon>;
        const Grid = (props) => <Icon {...props}><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></Icon>;
        const ScanBarcode = (props) => <Icon {...props}><path d="M3 7V5a2 2 0 0 1 2-2h2"/><path d="M17 3h2a2 2 0 0 1 2 2v2"/><path d="M21 17v2a2 2 0 0 1-2 2h-2"/><path d="M7 21H5a2 2 0 0 1-2-2v-2"/><rect width="14" height="10" x="5" y="7" rx="2"/></Icon>;
        const LogOut = (props) => <Icon {...props}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></Icon>;
        const Fingerprint = (props) => <Icon {...props}><path d="M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 4"/><path d="M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2"/><path d="M8.65 22c.21-.66.45-1.32.57-2"/><path d="M9 6.8a6 6 0 0 1 9 5.2c0 .47 0 .95-.07 1.43"/><path d="M14 20c.4 0 .73-.2.81-.5.5-1.87 1.5-2.25 2.19-4.5"/><path d="M16 5a6 6 0 0 0-6 6c0 1.89.62 2.9 1.69 3.9"/><path d="M18.82 8.76a4.48 4.48 0 0 1-.36 4.48c-.62.83-1.42 1.33-2.19 2.48"/><path d="M20.66 11.3c.4 1.94.3 3.85-.56 5.7H22a9.98 9.98 0 0 0 0-14.7"/></Icon>;
        const ChevronRight = (props) => <Icon {...props}><path d="m9 18 6-6-6-6"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></Icon>;
        const ArrowLeft = (props) => <Icon {...props}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></Icon>;
        const UserPlus = (props) => <Icon {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" x2="19" y1="8" y2="14"/><line x1="22" x2="16" y1="11" y2="11"/></Icon>;
        const Users = (props) => <Icon {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></Icon>;
        const Repeat = (props) => <Icon {...props}><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14"/><path d="m7 22-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/></Icon>;
        const PackageOpen = (props) => <Icon {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></Icon>;
        const CheckCircle2 = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></Icon>;
        const Banknote = (props) => <Icon {...props}><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></Icon>;
        const Share2 = (props) => <Icon {...props}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></Icon>;
        const Check = (props) => <Icon {...props}><path d="M20 6 9 17l-5-5"/></Icon>;
        const Landmark = (props) => <Icon {...props}><line x1="3" x2="21" y1="22" y2="22"/><line x1="6" x2="6" y1="18" y2="11"/><line x1="10" x2="10" y1="18" y2="11"/><line x1="14" x2="14" y1="18" y2="11"/><line x1="18" x2="18" y1="18" y2="11"/><polygon points="12 2 20 7 4 7"/></Icon>;
        const Delete = (props) => <Icon {...props}><path d="M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z"/><line x1="18" x2="12" y1="9" y2="15"/><line x1="12" x2="18" y1="9" y2="15"/></Icon>;

        // --- Komponen Aset Logo & Grafis Sederhana ---
        const WondrLogo = ({ size = "text-5xl", light = false }) => (
            <div className={`font-bold tracking-tighter flex flex-col items-center justify-center ${size} ${light ? 'text-white' : 'text-[#ff6600]'}`}>
                <div className="relative">
                    <span>wondr</span>
                    <div className="absolute bottom-1 left-[32%] w-[25%] h-[4px] bg-[#2dd4bf] rounded-full"></div>
                </div>
                <span className={`text-xs font-medium tracking-normal mt-0 ${light ? 'text-white' : 'text-gray-500'}`}>by BNI</span>
            </div>
        );

        // --- Ilustrasi Kotak dengan Jaring Laba-laba (Custom SVG) ---
        const EmptyBoxIllustration = () => (
            <div className="relative w-40 h-32 flex items-center justify-center">
                <div className="absolute inset-0 bg-teal-300 rounded-xl transform rotate-1 scale-90 opacity-20"></div>
                <div className="absolute inset-0 bg-[#5eead4] rounded-xl flex items-center justify-center z-10">
                    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 40 L50 55 L80 40 L50 25 L20 40" fill="#f97316" stroke="black" strokeWidth="2" strokeLinejoin="round"/>
                        <path d="M20 40 V70 L50 85 V55 M80 40 V70 L50 85" fill="#ea580c" stroke="black" strokeWidth="2" strokeLinejoin="round"/>
                        <path d="M50 55 V85" stroke="black" strokeWidth="2"/>
                        <path d="M20 40 L10 25" stroke="black" strokeWidth="2" strokeLinecap="round"/>
                        <path d="M80 40 L90 25" stroke="black" strokeWidth="2" strokeLinecap="round"/>
                        <path d="M50 25 L50 55" stroke="white" strokeWidth="1"/>
                        <path d="M50 40 L40 50 M50 40 L60 50" stroke="white" strokeWidth="1"/>
                        <circle cx="50" cy="45" r="5" stroke="white" strokeWidth="1"/>
                    </svg>
                </div>
            </div>
        );

        // --- Ilustrasi Sukses 3D Style (Shopping/Gift Theme) ---
        const SuccessIllustration = () => (
            <div className="relative w-48 h-40 flex items-center justify-center mb-4">
                <svg width="200" height="160" viewBox="0 0 200 160" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="100" cy="80" r="70" fill="#ecfdf5" />
                    <rect x="70" y="50" width="60" height="70" rx="4" fill="#2dd4bf" />
                    <path d="M70 50 H130 L125 120 H75 L70 50Z" fill="#14b8a6" />
                    <path d="M85 50 V40 C85 32 92 32 100 32 C108 32 115 32 115 40 V50" stroke="#0f766e" strokeWidth="3" strokeLinecap="round" />
                    <rect x="110" y="90" width="40" height="35" rx="2" fill="#fb923c" stroke="white" strokeWidth="2" />
                    <path d="M110 90 L150 90 L145 125 H115 L110 90Z" fill="#f97316" />
                    <path d="M130 90 V125" stroke="#fff" strokeWidth="1" opacity="0.5"/>
                    <path d="M40 40 L70 50 L40 60 L45 50 L40 40Z" fill="#ef4444" transform="rotate(-15 40 40)" />
                    <path d="M45 50 L180 80" stroke="white" strokeWidth="2" strokeDasharray="4 4" strokeLinecap="round" pathLength="1" opacity="0.6">
                        <animate attributeName="stroke-dashoffset" from="1" to="0" dur="1s" repeatCount="indefinite"/>
                    </path>
                    <circle cx="150" cy="110" r="18" fill="#00cc88" stroke="white" strokeWidth="3" />
                    <path d="M142 110 L147 115 L158 104" stroke="white" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            </div>
        );

        // --- Halaman 1: Splash Screen ---
        const SplashScreen = ({ onFinish }) => {
            useEffect(() => {
                const timer = setTimeout(() => {
                    onFinish();
                }, 3000);
                return () => clearTimeout(timer);
            }, [onFinish]);

            return (
                <div className="h-full w-full bg-[#ff6600] relative flex flex-col items-center justify-center overflow-hidden font-sans">
                    <div className="absolute -top-20 -left-20 w-64 h-64 bg-[#f0abfc] rounded-full opacity-100 z-0"></div>
                    <div className="absolute -top-10 right-0 w-80 h-80 bg-[#d9f99d] rounded-full rounded-tr-none transform translate-x-20 -translate-y-20 z-0"></div>
                    <div className="z-10 animate-pulse">
                        <WondrLogo size="text-7xl" light={true} />
                    </div>
                    <div className="absolute bottom-0 left-0 w-full h-1/3 bg-[#2dd4bf] rounded-tr-[100px] z-0 transform translate-y-20"></div>
                    <div className="absolute bottom-0 right-0 w-2/3 h-1/4 bg-[#a78bfa] rounded-tl-[100px] z-0 transform translate-y-10"></div>
                    <div className="absolute bottom-8 px-8 text-center text-xs text-teal-900/60 z-20 font-medium leading-relaxed">
                        PT Bank Negara Indonesia (Persero) Tbk berizin dan diawasi oleh Otoritas Jasa Keuangan (OJK) & Bank Indonesia (BI) serta merupakan peserta penjaminan Lembaga Penjamin Simpanan (LPS).
                    </div>
                </div>
            );
        };

        // --- Halaman 2: Login Page ---
        const LoginPage = ({ onLogin }) => {
            return (
                <div className="h-full w-full bg-white relative flex flex-col justify-between font-sans">
                    <div className="flex-1 flex flex-col items-center justify-center mt-20">
                        <WondrLogo size="text-6xl" />
                    </div>
                    <div className="px-8 pb-8">
                        <div className="flex justify-between items-start mb-10 px-2">
                            <div className="flex flex-col items-center gap-2 w-1/4">
                                <div className="w-14 h-14 bg-[#5eead4] rounded-2xl flex items-center justify-center shadow-sm">
                                    <Wallet className="text-teal-900" size={24} />
                                </div>
                                <span className="text-xs font-bold text-gray-800 text-center">E-Wallet</span>
                            </div>
                            <div className="flex flex-col items-center gap-2 w-1/4">
                                <div className="w-14 h-14 bg-[#facc15] rounded-2xl flex items-center justify-center shadow-sm">
                                    <ScanBarcode className="text-yellow-900" size={24} />
                                </div>
                                <span className="text-xs font-bold text-gray-800 text-center">QRIS</span>
                            </div>
                            <div className="flex flex-col items-center gap-2 w-1/4">
                                <div className="w-14 h-14 bg-[#fb923c] rounded-2xl flex items-center justify-center shadow-sm">
                                    <CreditCard className="text-orange-900" size={24} />
                                </div>
                                <span className="text-xs font-bold text-gray-800 text-center">TapCash</span>
                            </div>
                            <div className="flex flex-col items-center gap-2 w-1/4">
                                <div className="w-14 h-14 bg-[#5eead4] rounded-2xl flex items-center justify-center shadow-sm">
                                    <Smartphone className="text-teal-900" size={24} />
                                </div>
                                <span className="text-xs font-bold text-gray-800 text-center">Mobile Tunai</span>
                            </div>
                        </div>
                        <button 
                            onClick={onLogin}
                            className="w-full bg-[#5eead4] h-14 rounded-full flex items-center justify-center gap-3 active:scale-95 transition-transform shadow-md mb-8"
                        >
                            <Fingerprint size={24} className="text-teal-900" />
                            <span className="text-lg font-bold text-teal-900">Login</span>
                        </button>
                        <div className="absolute -bottom-10 -left-10 w-40 h-40 bg-[#d9f99d] rounded-full z-0"></div>
                        <div className="absolute -bottom-10 -right-10 w-32 h-32 bg-[#f0abfc] rounded-full z-0"></div>
                    </div>
                </div>
            );
        };

        // --- Halaman Baru: PIN Page ---
        const PinPage = ({ onBack, onSuccess, title = "Masukkan MPIN" }) => {
            const [pin, setPin] = useState("");

            const handlePress = (num) => {
                if (pin.length < 6) {
                    setPin(prev => prev + num);
                }
            };

            const handleDelete = () => {
                setPin(prev => prev.slice(0, -1));
            };

            useEffect(() => {
                if (pin.length === 6) {
                    setTimeout(() => {
                        if (pin === '647077') {
                            onSuccess();
                            setPin("");
                        } else {
                            alert("PIN Salah. Silakan coba lagi.");
                            setPin(""); 
                        }
                    }, 300);
                }
            }, [pin, onSuccess]);

            return (
                <div className="h-full w-full bg-white flex flex-col font-sans">
                    <div className="px-5 pt-6 pb-4 flex items-center gap-4 sticky top-0 z-20">
                        <button onClick={onBack} className="p-1 -ml-1">
                            <ArrowLeft size={24} className="text-black" />
                        </button>
                        <h1 className="text-xl font-bold text-black">Keamanan</h1>
                    </div>
                    <div className="flex-1 flex flex-col items-center pt-10">
                        <h2 className="text-xl font-bold text-gray-900 mb-8">{title}</h2>
                        <div className="flex gap-4 mb-20">
                            {[...Array(6)].map((_, i) => (
                                <div 
                                    key={i} 
                                    className={`w-4 h-4 rounded-full border border-gray-400 ${i < pin.length ? 'bg-[#ff6600] border-[#ff6600]' : 'bg-transparent'}`}
                                ></div>
                            ))}
                        </div>
                        <div className="w-full px-10 grid grid-cols-3 gap-y-6 gap-x-8">
                            {[1, 2, 3, 4, 5, 6, 7, 8, 9].map(num => (
                                <button 
                                    key={num} 
                                    onClick={() => handlePress(num.toString())}
                                    className="h-16 w-16 rounded-full flex items-center justify-center text-3xl font-bold text-gray-800 active:bg-gray-100 mx-auto transition-colors"
                                >
                                    {num}
                                </button>
                            ))}
                            <div className="h-16 w-16"></div>
                            <button 
                                onClick={() => handlePress("0")}
                                className="h-16 w-16 rounded-full flex items-center justify-center text-3xl font-bold text-gray-800 active:bg-gray-100 mx-auto transition-colors"
                            >
                                0
                            </button>
                            <button 
                                onClick={handleDelete}
                                className="h-16 w-16 rounded-full flex items-center justify-center text-gray-800 active:bg-gray-100 mx-auto transition-colors"
                            >
                                <Delete size={28} />
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // --- Halaman 3: Dashboard Utama ---
        const DashboardPage = ({ onLogout, onNavigate, balance }) => {
            const [showBalance, setShowBalance] = useState(true);
            const formattedBalance = `Rp${balance.toLocaleString('id-ID')}`;

            const features = [
                { name: 'Transfer', icon: Send, color: 'bg-teal-100', iconColor: 'text-teal-700', action: () => onNavigate('transfer') },
                { name: 'TapCash', icon: CreditCard, color: 'bg-orange-100', iconColor: 'text-orange-600' },
                { name: 'Bayar & Beli', icon: FileText, color: 'bg-blue-100', iconColor: 'text-blue-600' },
                { name: 'E-Wallet', icon: Wallet, color: 'bg-teal-100', iconColor: 'text-teal-700', action: () => onNavigate('ewallet') },
                { name: 'Virtual Account', icon: Smartphone, color: 'bg-teal-100', iconColor: 'text-teal-700' },
                { name: 'Transfer LN', icon: Globe, color: 'bg-teal-100', iconColor: 'text-teal-700' },
                { name: 'Lifestyle', icon: ShoppingBag, color: 'bg-purple-100', iconColor: 'text-purple-700' },
                { name: 'Lihat Semua', icon: Grid, color: 'bg-gray-100', iconColor: 'text-gray-700' },
            ];

            return (
                <div className="h-full w-full bg-gray-50 overflow-y-auto font-sans pb-20 no-scrollbar">
                    <div className="bg-white px-5 pt-6 pb-4 sticky top-0 z-20">
                        <div className="flex justify-between items-center mb-6">
                            <div className="scale-75 origin-left">
                                <WondrLogo size="text-3xl" />
                            </div>
                            <div className="flex gap-3">
                                <div className="px-3 py-1 rounded-full border border-orange-500 flex items-center gap-1">
                                    <span className="text-xs font-bold text-gray-800">© Poin</span>
                                </div>
                                <button onClick={onLogout} className="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center">
                                    <LogOut size={14} className="text-gray-600" />
                                </button>
                            </div>
                        </div>
                        <div className="flex justify-between items-end mb-6">
                            <div className="flex items-center gap-2">
                                <h1 className="text-xl font-bold text-gray-900">Hi, Satriya!</h1>
                            </div>
                            <div className="flex gap-4 text-gray-600">
                                <div className="flex flex-col items-center">
                                    <Bell size={20} />
                                    <span className="text-[10px] mt-1">Notifikasi</span>
                                </div>
                                <div className="flex flex-col items-center">
                                    <ReceiptText size={20} />
                                    <span className="text-[10px] mt-1">Bukti Transaksi</span>
                                </div>
                            </div>
                        </div>
                        <div className="bg-gray-50 p-1 rounded-full flex justify-between mb-2">
                            <button className="flex-1 py-2 text-sm font-medium text-gray-500 rounded-full">Insight</button>
                            <button className="flex-1 py-2 text-sm font-bold text-gray-900 bg-[#d9f99d] rounded-full shadow-sm">Transaksi</button>
                            <button className="flex-1 py-2 text-sm font-medium text-gray-500 rounded-full">Growth</button>
                        </div>
                    </div>
                    <div className="px-5 pt-2">
                        <div className="flex justify-between items-center mb-3">
                            <h2 className="font-bold text-lg text-gray-900">Rekening transaksi kamu</h2>
                            <span className="text-orange-500 text-sm font-bold underline cursor-pointer">Lihat Semua</span>
                        </div>
                        <div className="flex h-40 w-full mb-8 shadow-lg rounded-2xl overflow-hidden relative">
                            <div className="w-1/3 bg-[#a5f3fc] flex flex-col items-center justify-center relative p-3 text-center">
                                <div className="w-8 h-8 rounded-full bg-white flex items-center justify-center mb-2 shadow-sm border border-gray-100">
                                    <div className="w-5 h-5 rounded-full border-2 border-black border-t-transparent animate-spin-slow"></div>
                                </div>
                                <span className="text-xs font-semibold leading-tight text-teal-900">Lihat Portfolio</span>
                                <div className="absolute right-0 top-0 bottom-0 w-4 bg-white opacity-20 transform skew-x-12 translate-x-2"></div>
                            </div>
                            <div className="flex-1 bg-gradient-to-br from-orange-400 to-orange-300 p-4 relative">
                                <div className="flex justify-between items-start mb-1">
                                    <div>
                                        <p className="text-xs text-orange-900 font-semibold uppercase tracking-wide">TAPLUS</p>
                                        <p className="text-lg font-bold text-gray-900 tracking-wider">1990943608</p>
                                    </div>
                                    <span className="bg-white/90 text-[10px] font-bold px-2 py-1 rounded-full text-orange-600">UTAMA</span>
                                </div>
                                <div className="mt-6 relative z-10">
                                    <p className="text-xs text-orange-900 mb-1">Saldo efektif</p>
                                    <div className="flex items-center gap-3">
                                        <span className="text-2xl font-extrabold text-gray-900">
                                            {showBalance ? formattedBalance : "Rp •••••••"}
                                        </span>
                                        <button onClick={() => setShowBalance(!showBalance)} className="text-gray-900 opacity-70 cursor-pointer">
                                            {showBalance ? <EyeOff size={18} /> : <Eye size={18} />}
                                        </button>
                                    </div>
                                </div>
                                <div className="absolute -bottom-10 -right-5 w-32 h-32 bg-white opacity-10 rounded-full"></div>
                            </div>
                        </div>
                        <div className="flex justify-center gap-2 mb-8">
                            <div className="w-2 h-2 rounded-full bg-black"></div>
                            <div className="w-2 h-2 rounded-full bg-gray-300"></div>
                            <div className="w-2 h-2 rounded-full bg-gray-300"></div>
                        </div>
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="font-bold text-lg text-gray-900">Fitur pilihan kamu</h2>
                            <span className="text-orange-500 text-sm font-bold underline cursor-pointer">Atur</span>
                        </div>
                        <div className="grid grid-cols-4 gap-y-6 gap-x-2 mb-10">
                            {features.map((item, idx) => (
                                <div key={idx} onClick={item.action} className="flex flex-col items-center gap-2 cursor-pointer active:scale-95 transition-transform">
                                    <div className={`w-14 h-14 ${item.color} rounded-2xl flex items-center justify-center shadow-sm`}>
                                        <item.icon className={item.iconColor} size={24} strokeWidth={2} />
                                    </div>
                                    <span className="text-[11px] font-semibold text-center leading-tight px-1 text-gray-800">{item.name}</span>
                                </div>
                            ))}
                        </div>
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="font-bold text-lg text-gray-900">Promo buat kamu</h2>
                            <span className="text-orange-500 text-sm font-bold underline cursor-pointer">Lihat Semua</span>
                        </div>
                        <div className="w-full h-40 bg-[#d9f99d] rounded-2xl relative overflow-hidden flex items-center mb-10 border border-gray-100 shadow-md">
                            <div className="w-1/2 p-5 z-10">
                                <div className="inline-block bg-[#facc15] px-2 py-0.5 rounded-md text-[10px] font-bold mb-2 shadow-sm">Hingga 31 Des 2025</div>
                                <h3 className="text-sm font-extrabold text-gray-900 leading-tight">Ajak Teman Kamu, Dapatkan Reward</h3>
                            </div>
                            <div className="absolute right-0 top-0 bottom-0 w-2/3 bg-[#8b5cf6] rounded-l-full transform translate-x-10 z-0"></div>
                            <div className="absolute right-5 z-10 bg-black text-white px-3 py-1 rounded-lg text-xs font-mono font-bold tracking-widest border border-white">
                                QRIS
                            </div>
                            <div className="absolute top-2 right-10 text-yellow-300 text-xs">✦</div>
                            <div className="absolute bottom-4 right-20 text-yellow-300 text-lg">✦</div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Halaman 4: Transfer Page ---
        const TransferPage = ({ onBack, onNavigate }) => {
            return (
                <div className="h-full w-full bg-[#f8f9fa] flex flex-col font-sans">
                    <div className="bg-white px-5 pt-6 pb-4 flex items-center gap-4 sticky top-0 z-20 shadow-sm">
                        <button onClick={onBack} className="p-1 -ml-1">
                            <ArrowLeft size={24} className="text-black" />
                        </button>
                        <h1 className="text-xl font-bold text-black">Transfer</h1>
                    </div>
                    <div className="p-5 flex-1 overflow-y-auto">
                        <div className="flex items-center gap-2 mb-8">
                            <div onClick={() => onNavigate('transfer-form')} className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center justify-center w-[100px] h-[100px] flex-shrink-0 cursor-pointer active:bg-gray-50 transition-colors">
                                <div className="w-10 h-10 rounded-full border border-teal-500 flex items-center justify-center mb-2">
                                    <UserPlus size={20} className="text-teal-600" />
                                </div>
                                <span className="text-[10px] font-bold text-center text-black leading-tight">Penerima Baru</span>
                            </div>
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center justify-center w-[100px] h-[100px] flex-shrink-0 opacity-60">
                                <div className="w-10 h-10 rounded-full border border-teal-500 flex items-center justify-center mb-2">
                                    <Repeat size={20} className="text-teal-600" />
                                </div>
                                <span className="text-[10px] font-bold text-center text-black leading-tight">Diri Sendiri</span>
                            </div>
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center justify-center w-[100px] h-[100px] flex-shrink-0 opacity-60">
                                <div className="w-10 h-10 rounded-full border border-teal-500 flex items-center justify-center mb-2">
                                    <Users size={20} className="text-teal-600" />
                                </div>
                                <span className="text-[10px] font-bold text-center text-black leading-tight">Grup Baru</span>
                            </div>
                            <div className="flex flex-col gap-1 ml-1">
                                <div className="w-1.5 h-1.5 bg-black rounded-full"></div>
                                <div className="w-1.5 h-1.5 bg-gray-300 rounded-full"></div>
                            </div>
                        </div>
                        <div className="bg-gray-200/50 p-1 rounded-full flex justify-between mb-10">
                            <button className="flex-1 py-2 text-sm font-bold text-black bg-[#d9f99d] rounded-full shadow-sm">Tersimpan</button>
                            <button className="flex-1 py-2 text-sm font-medium text-gray-500 rounded-full">Terakhir</button>
                        </div>
                        <div className="flex flex-col items-center justify-center mt-4">
                            <EmptyBoxIllustration />
                            <h3 className="text-lg font-bold text-black mt-6 mb-2 text-center">Kamu belum pernah simpan penerima</h3>
                            <p className="text-sm text-gray-600 text-center leading-relaxed px-4">
                                Yuk, transfer sekarang dan simpan penerimanya. Nanti kalau mau transfer, bisa langsung pilih dari daftar ini.
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Halaman 5: Form Transfer ---
        const TransferFormPage = ({ onBack, onSubmit }) => {
            const [formData, setFormData] = useState({
                rekening: '',
                bank: 'BNI',
                nama: '',
                jumlah: '',
                catatan: ''
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleAmountChange = (e) => {
                let value = e.target.value;
                const numberString = value.replace(/\D/g, '');
                const formatted = numberString.replace(/\B(?=(\d{3})+(?!\d))/g, ".");
                setFormData(prev => ({ ...prev, jumlah: formatted }));
            };

            const handleNext = () => {
                const rawAmount = parseInt(formData.jumlah.replace(/\./g, ''), 10);
                if (formData.rekening && formData.nama && rawAmount > 0) {
                    const submitData = {
                        ...formData,
                        jumlah: rawAmount
                    };
                    onSubmit(formData.catatan, submitData);
                } else {
                    alert("Mohon lengkapi data rekening, nama, dan jumlah.");
                }
            };

            return (
                <div className="h-full w-full bg-[#f8f9fa] flex flex-col font-sans">
                    <div className="bg-white px-5 pt-6 pb-4 flex items-center gap-4 sticky top-0 z-20 shadow-sm">
                        <button onClick={onBack} className="p-1 -ml-1">
                            <ArrowLeft size={24} className="text-black" />
                        </button>
                        <h1 className="text-xl font-bold text-black">Penerima Baru</h1>
                    </div>
                    <div className="p-5 flex-1 overflow-y-auto">
                        <div className="space-y-6">
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Nomor Rekening</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <CreditCard size={20} className="text-gray-400" />
                                    <input type="number" name="rekening" value={formData.rekening} onChange={handleChange} className="w-full outline-none text-gray-900 font-bold placeholder-gray-300" placeholder="Contoh: 1234567890" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Bank Tujuan</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <Landmark size={20} className="text-gray-400" />
                                    <select name="bank" value={formData.bank} onChange={handleChange} className="w-full outline-none text-gray-900 font-bold bg-transparent">
                                        <option value="BNI">BNI</option>
                                        <option value="BCA">BCA</option>
                                        <option value="MANDIRI">MANDIRI</option>
                                        <option value="BRI">BRI</option>
                                        <option value="CIMB">CIMB NIAGA</option>
                                        <option value="BSI">BSI</option>
                                    </select>
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Nama Penerima</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <UserPlus size={20} className="text-gray-400" />
                                    <input type="text" name="nama" value={formData.nama} onChange={handleChange} className="w-full outline-none text-gray-900 font-bold placeholder-gray-300" placeholder="Nama Lengkap" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Jumlah Transfer</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <Banknote size={20} className="text-gray-400" />
                                    <input type="text" name="jumlah" value={formData.jumlah} onChange={handleAmountChange} className="w-full outline-none text-gray-900 font-bold placeholder-gray-300" placeholder="0" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Catatan</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <FileText size={20} className="text-gray-400" />
                                    <input type="text" name="catatan" value={formData.catatan} onChange={handleChange} className="w-full outline-none text-gray-900 font-medium placeholder-gray-300" placeholder="Tulis catatan (Opsional)" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="p-5 bg-white border-t border-gray-100">
                        <button onClick={handleNext} className="w-full bg-[#5eead4] h-12 rounded-full flex items-center justify-center gap-2 active:scale-95 transition-transform shadow-md font-bold text-teal-900">Lanjut</button>
                    </div>
                </div>
            );
        };

        // --- Halaman Baru: E-Wallet Page ---
        const EWalletPage = ({ onBack, onSelectProvider }) => {
            const providers = [
                { name: 'GoPay', color: 'bg-blue-100', textColor: 'text-blue-600' },
                { name: 'OVO', color: 'bg-purple-100', textColor: 'text-purple-600' },
                { name: 'Dana', color: 'bg-sky-100', textColor: 'text-sky-600' },
                { name: 'ShopeePay', color: 'bg-orange-100', textColor: 'text-orange-600' },
                { name: 'LinkAja', color: 'bg-red-100', textColor: 'text-red-600' },
                { name: 'i.saku', color: 'bg-indigo-100', textColor: 'text-indigo-600' },
            ];

            return (
                <div className="h-full w-full bg-[#f8f9fa] flex flex-col font-sans">
                    <div className="bg-white px-5 pt-6 pb-4 flex items-center gap-4 sticky top-0 z-20 shadow-sm">
                        <button onClick={onBack} className="p-1 -ml-1">
                            <ArrowLeft size={24} className="text-black" />
                        </button>
                        <h1 className="text-xl font-bold text-black">E-Wallet</h1>
                    </div>
                    <div className="p-5 flex-1 overflow-y-auto">
                        <h2 className="font-bold text-lg text-gray-900 mb-4">Pilih E-Wallet</h2>
                        <div className="grid grid-cols-3 gap-4">
                            {providers.map((item, idx) => (
                                <div key={idx} onClick={() => onSelectProvider(item.name)} className="flex flex-col items-center gap-2 cursor-pointer active:scale-95 transition-transform bg-white p-4 rounded-2xl shadow-sm border border-gray-100">
                                    <div className={`w-12 h-12 ${item.color} rounded-full flex items-center justify-center`}>
                                        <Wallet className={item.textColor} size={24} />
                                    </div>
                                    <span className="text-xs font-bold text-center text-gray-800">{item.name}</span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Halaman Baru: E-Wallet Form Page ---
        const EWalletFormPage = ({ onBack, provider, onSubmit }) => {
            const [formData, setFormData] = useState({ phone: '', amount: '', catatan: '' });

            const handleAmountChange = (e) => {
                let value = e.target.value;
                const numberString = value.replace(/\D/g, '');
                const formatted = numberString.replace(/\B(?=(\d{3})+(?!\d))/g, ".");
                setFormData(prev => ({ ...prev, amount: formatted }));
            };

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleNext = () => {
                const rawAmount = parseInt(formData.amount.replace(/\./g, ''), 10);
                if (formData.phone && rawAmount > 0) {
                    const submitData = {
                        nama: provider,
                        rekening: formData.phone,
                        bank: 'E-Wallet',
                        jumlah: rawAmount
                    };
                    onSubmit(formData.catatan, submitData);
                } else {
                    alert("Mohon lengkapi nomor HP dan nominal.");
                }
            };

            return (
                <div className="h-full w-full bg-[#f8f9fa] flex flex-col font-sans">
                    <div className="bg-white px-5 pt-6 pb-4 flex items-center gap-4 sticky top-0 z-20 shadow-sm">
                        <button onClick={onBack} className="p-1 -ml-1">
                            <ArrowLeft size={24} className="text-black" />
                        </button>
                        <h1 className="text-xl font-bold text-black">Top Up {provider}</h1>
                    </div>
                    <div className="p-5 flex-1 overflow-y-auto">
                        <div className="space-y-6">
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Nomor Handphone</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <Smartphone size={20} className="text-gray-400" />
                                    <input type="number" name="phone" value={formData.phone} onChange={handleChange} className="w-full outline-none text-gray-900 font-bold placeholder-gray-300" placeholder="Contoh: 08123456789" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Nominal Top Up</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <Banknote size={20} className="text-gray-400" />
                                    <input type="text" name="amount" value={formData.amount} onChange={handleAmountChange} className="w-full outline-none text-gray-900 font-bold placeholder-gray-300" placeholder="0" />
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-xs font-bold text-gray-500 uppercase">Catatan</label>
                                <div className="bg-white p-3 rounded-xl border border-gray-200 focus-within:border-teal-500 flex items-center gap-3">
                                    <FileText size={20} className="text-gray-400" />
                                    <input type="text" name="catatan" value={formData.catatan} onChange={handleChange} className="w-full outline-none text-gray-900 font-medium placeholder-gray-300" placeholder="Tulis catatan (Opsional)" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="p-5 bg-white border-t border-gray-100">
                        <button onClick={handleNext} className="w-full bg-[#5eead4] h-12 rounded-full flex items-center justify-center gap-2 active:scale-95 transition-transform shadow-md font-bold text-teal-900">Lanjut</button>
                    </div>
                </div>
            );
        };

        // --- Halaman 6: Status Page (Updated) ---
        const StatusPage = ({ isSuccess, onHome, transactionData }) => {
            const { 
                nama = 'AGUS WIDODO', 
                rekening = '1836954270', 
                jumlah = '27919', 
                bank = 'BNI',
                timestamp = '29 Nov 2025 • 04:52:02 WIB',
                refID = '20251129045202000499'
            } = transactionData || {};

            const formattedJumlah = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(jumlah).replace('IDR', 'Rp');

            if (!isSuccess) {
                return (
                    <div className="h-full w-full bg-white flex flex-col items-center justify-center p-6 relative">
                        <div className="mb-6 animate-bounce">
                            <XCircle size={80} className="text-red-500" />
                        </div>
                        <h2 className="text-2xl font-bold mb-2 text-red-600">Transaksi Gagal</h2>
                        <p className="text-gray-500 text-center text-sm mb-10 leading-relaxed px-4">
                            Maaf, Rekening atau kontak penerima saat ini sedang menjalani maintenance system. Silahkan coba lagi dalam beberapa jam kedepan.
                        </p>
                        <button onClick={onHome} className="w-full bg-gray-100 text-gray-800 h-12 rounded-full font-bold active:scale-95 transition-transform">
                            Kembali ke Dashboard
                        </button>
                        <div className="absolute top-0 left-0 w-full h-2 bg-red-400"></div>
                    </div>
                )
            }

            return (
                <div className="h-full w-full bg-white flex flex-col items-center pt-20 pb-6 px-6 font-sans relative overflow-hidden">
                    <div className="z-10 animate-fade-in-up">
                        <SuccessIllustration />
                    </div>
                    <h2 className="text-xl font-bold mb-1 text-black z-10">Transaksi berhasil!</h2>
                    <h1 className="text-4xl font-extrabold text-black mb-2 z-10">{formattedJumlah}</h1>
                    <div className="flex flex-col items-center text-xs font-medium text-gray-500 mb-8 z-10">
                        <span>{timestamp} •</span>
                        <span>Ref ID: {refID}</span>
                    </div>
                    <div className="flex gap-4 w-full justify-center mb-8 z-10">
                        <button className="flex flex-col items-center justify-center w-24 h-24 bg-[#ff6600] text-white rounded-2xl active:scale-95 transition shadow-sm">
                            <div className="w-8 h-8 mb-2 flex items-center justify-center border-2 border-white rounded-lg">
                                <ReceiptText size={16} />
                            </div>
                            <span className="text-[10px] font-bold">Bukti Transaksi</span>
                        </button>
                        <button className="flex flex-col items-center justify-center w-24 h-24 bg-[#ff6600] text-white rounded-2xl active:scale-95 transition shadow-sm">
                            <div className="w-8 h-8 mb-2 flex items-center justify-center border-2 border-white rounded-lg">
                                <Share2 size={16} />
                            </div>
                            <span className="text-[10px] font-bold">Bagikan</span>
                        </button>
                    </div>
                    <div className="w-full space-y-4 mb-auto z-10">
                        <div className="w-full">
                            <p className="text-xs text-gray-500 mb-1 ml-1">Tujuan</p>
                            <div className="w-full border border-gray-300 rounded-xl p-3 bg-white">
                                <p className="font-bold text-sm text-black">{nama}</p>
                                <p className="text-xs text-gray-500">{bank} • {rekening}</p>
                            </div>
                        </div>
                        <div className="w-full">
                            <p className="text-xs text-gray-500 mb-1 ml-1">Sumber dana</p>
                            <div className="w-full border border-gray-300 rounded-xl p-3 bg-white">
                                <p className="font-bold text-sm text-black">SATRIYA</p>
                                <p className="text-xs text-gray-500">TAPLUS • *******608</p>
                            </div>
                        </div>
                    </div>
                    <button onClick={onHome} className="w-full bg-[#5eead4] text-teal-900 h-14 rounded-full font-bold text-lg active:scale-95 transition-transform z-10 shadow-lg mt-4">
                        Kembali ke Beranda
                    </button>
                    <div className="absolute top-10 left-[-50px] w-40 h-40 bg-[#d9f99d] rounded-full opacity-50 z-0 blur-xl"></div>
                    <div className="absolute bottom-[-20px] right-[-20px] w-64 h-64 bg-[#ccfbf1] rounded-full opacity-60 z-0 blur-xl"></div>
                </div>
            );
        };

        // --- Main App Component ---
        const WondrApp = () => {
            const [currentPage, setCurrentPage] = useState('splash');
            const [transactionSuccess, setTransactionSuccess] = useState(false);
            const [lastTransaction, setLastTransaction] = useState(null);
            const [selectedEWallet, setSelectedEWallet] = useState(null);
            const [balance, setBalance] = useState(165982003);
            const [pinContext, setPinContext] = useState(null);

            const handleSplashFinish = () => setCurrentPage('login');
            const handleLogin = () => {
                setPinContext({ type: 'LOGIN' });
                setCurrentPage('pin');
            };
            const handleLogout = () => setCurrentPage('login');
            const handleNavigate = (page) => setCurrentPage(page);
            const handleSelectEWallet = (provider) => {
                setSelectedEWallet(provider);
                setCurrentPage('ewallet-form');
            };

            const handlePinSuccess = () => {
                if (pinContext?.type === 'LOGIN') {
                    setCurrentPage('dashboard');
                } else if (pinContext?.type === 'TRANSACTION') {
                    executeTransaction(pinContext.note, pinContext.data);
                }
            };

            const handleTransactionSubmit = (note, data) => {
                setPinContext({ type: 'TRANSACTION', note, data });
                setCurrentPage('pin');
            };

            const executeTransaction = (note, data) => {
                const now = new Date();
                const dateOptions = { day: '2-digit', month: 'short', year: 'numeric' };
                const dateStr = now.toLocaleDateString('id-ID', dateOptions);
                const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                const timeStr = now.toLocaleTimeString('id-ID', timeOptions).replace(/\./g, ':');
                const yyyy = now.getFullYear();
                const mm = String(now.getMonth() + 1).padStart(2, '0');
                const dd = String(now.getDate()).padStart(2, '0');
                const hh = String(now.getHours()).padStart(2, '0');
                const min = String(now.getMinutes()).padStart(2, '0');
                const ss = String(now.getSeconds()).padStart(2, '0');
                const random = Math.floor(100000 + Math.random() * 900000);
                const refID = `${yyyy}${mm}${dd}${hh}${min}${ss}${random}`;

                const fullTransactionData = {
                    ...data,
                    timestamp: `${dateStr} • ${timeStr} WIB`,
                    refID: refID
                };

                if (note && note.trim().length > 0) {
                    setTransactionSuccess(true);
                    setBalance(prev => prev - data.jumlah);
                } else {
                    setTransactionSuccess(false);
                }
                
                setLastTransaction(fullTransactionData);
                setCurrentPage('status');
            };

            return (
                <div className="w-full max-w-sm h-[800px] bg-white rounded-[40px] shadow-2xl overflow-hidden relative border-8 border-gray-900">
                    {currentPage === 'splash' && <SplashScreen onFinish={handleSplashFinish} />}
                    {currentPage === 'login' && <LoginPage onLogin={handleLogin} />}
                    
                    {currentPage === 'pin' && (
                        <PinPage 
                            onBack={() => {
                                if (pinContext?.type === 'LOGIN') setCurrentPage('login');
                                else if (pinContext?.type === 'TRANSACTION') {
                                    if (pinContext.data.bank === 'E-Wallet') setCurrentPage('ewallet-form');
                                    else setCurrentPage('transfer-form');
                                }
                            }}
                            onSuccess={handlePinSuccess}
                            title={pinContext?.type === 'LOGIN' ? "Masukkan MPIN" : "Konfirmasi Transaksi"}
                        />
                    )}

                    {currentPage === 'dashboard' && <DashboardPage onLogout={handleLogout} onNavigate={handleNavigate} balance={balance} />}
                    {currentPage === 'transfer' && <TransferPage onBack={() => handleNavigate('dashboard')} onNavigate={handleNavigate} />}
                    
                    {currentPage === 'transfer-form' && (
                        <TransferFormPage 
                            onBack={() => handleNavigate('transfer')} 
                            onSubmit={handleTransactionSubmit}
                        />
                    )}

                    {currentPage === 'ewallet' && (
                        <EWalletPage 
                            onBack={() => handleNavigate('dashboard')}
                            onSelectProvider={handleSelectEWallet}
                        />
                    )}

                    {currentPage === 'ewallet-form' && (
                        <EWalletFormPage 
                            onBack={() => handleNavigate('ewallet')}
                            provider={selectedEWallet}
                            onSubmit={handleTransactionSubmit}
                        />
                    )}

                    {currentPage === 'status' && (
                        <StatusPage 
                            isSuccess={transactionSuccess} 
                            onHome={() => handleNavigate('dashboard')} 
                            transactionData={lastTransaction}
                        />
                    )}

                    <div className="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-32 h-1.5 bg-black/20 rounded-full z-50"></div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WondrApp />);
    </script>
</body>
</html>
